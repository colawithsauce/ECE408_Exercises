#include "ece408.hpp"
#include "gtest/gtest.h"

TEST(mat_add_test, correctness_basic)
{
    double A[4][4] = { 0.7368261229519238,  0.8361168152051535,
                       0.2966741354964374,  0.3631143606048941,
                       0.4283400016070641,  0.5235987023477883,
                       0.49817895630657827, 0.6337419144011672,
                       0.7438634389743811,  0.9110341197718771,
                       0.8885963942759426,  0.46462689790823575,
                       0.5249049508866512,  0.8668270800925814,
                       0.3414550793867811,  0.41059734980184215 };

    double B[4][4] = { 0.24661470641213667, 0.9896589087189104,
                       0.11004081228608986, 0.03850001526227009,
                       0.9378783154491531,  0.3869907504977669,
                       0.6875714879564397,  0.17323039467000734,
                       0.8677625113556063,  0.8478284062278458,
                       0.742916504381492,   0.022184795263631374,
                       0.9290680531345351,  0.35342383342344874,
                       0.5941872224488747,  0.5729029261934638 };

    double C[4][4] = { 0.9834408293640605,  1.825775723924064,
                       0.40671494778252726, 0.4016143758671642,
                       1.3662183170562172,  0.9105894528455551,
                       1.185750444263018,   0.8069723090711746,
                       1.6116259503299875,  1.758862525999723,
                       1.6315128986574345,  0.4868116931718671,
                       1.4539730040211865,  1.22025091351603,
                       0.9356423018356558,  0.983500275995306 };

    double* matC = (double*)malloc(sizeof(double) * 4 * 4);

    mat_add((const double*)A, (const double*)B, matC, 4, 4);

    ASSERT_TRUE(matrix_same((const double*)C, matC, 4, 4));
}
